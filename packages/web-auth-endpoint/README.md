# Web Auth Endpoint #

## Getting Started ##

### Running web-auth-endpoint locally ###

You will need to set up environment variables to run `web-auth-endpoint` and `platform-deploy`. Create a `secrets/` directory at the root of the Interbit repository and create two shell files, `platform-deploy.sh` and `web-auth-endpoint.sh`.

`platform-deploy.sh` looks like this:
```
#!/bin/bash
# Secrets for Accounts APPC github oAuth chain
export GITHUB_CLIENT_ID=""
export GITHUB_CLIENT_SECRET=""
export GITHUB_REDIRECT_URL="http://localhost:8888/oauth/github"
export OAUTH_CALLBACK_URL="http://localhost:3025/account/oauth/gitHub"
# Keypair for the platform node
export PUBLIC_KEY=""
export PRIVATE_KEY=""
# Peer list override
export PORT=5025
export CONNECT_TO_PEERS="localhost:8888"
```

The `PUBLIC_KEY` and `PRIVATE_KEY` can be found in the config var settings for `ib-dev--master` in Heroku.

Next, we'll create a new GitHub oAuth application. Log into your GitHub account and create a new application under Settings > Develoepr Settings > oAuth Apps. Set the Authorization callback URL to `http://localhost:8888/oauth/github`. Fill in the `GITHUB_CLIENT_ID` and `GITHUB_CLIENT_SECRET` generated by GitHub.

`web-auth-endpoint.sh` looks like this:
```
#!/bin/bash
# Key pair for the web auth node
export PUBLIC_KEY=""
export PRIVATE_KEY=""
# Peer list override
export PORT=8888
export CONNECT_TO_PEERS="localhost:5025"
```

The `PUBLIC_KEY` and `PRIVATE_KEY` can be found in the config var settings for `ib-dev-web-auth` in Heroku.

Open a terminal window and
```
cd packages/platform-deploy
source ../../secrets/platform-deploy.sh
npm run build:dev
```

Once the build completes, `npm run start`.

In another terminal window,
```
cd packages/web-auth-endpoint
source ../../secrets/web-auth-endpoint.sh
npm run start
```

